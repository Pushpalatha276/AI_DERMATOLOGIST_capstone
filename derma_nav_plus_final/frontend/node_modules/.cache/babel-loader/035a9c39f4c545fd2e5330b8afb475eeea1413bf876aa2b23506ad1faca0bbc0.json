{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Chatbot(){const[open,setOpen]=useState(false);const[msgs,setMsgs]=useState([{from:\"bot\",text:\"Hi! I can help with signup/login, camera/upload, history, and disease info.\"}]);const[input,setInput]=useState(\"\");const bodyRef=useRef(null);useEffect(()=>{if(bodyRef.current)bodyRef.current.scrollTop=bodyRef.current.scrollHeight;},[msgs,open]);const send=async()=>{const text=input.trim();if(!text)return;setMsgs(m=>[...m,{from:\"user\",text}]);setInput(\"\");try{const res=await fetch(\"/api/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:text})});const data=await res.json();setMsgs(m=>[...m,{from:\"bot\",text:data.reply||\"Hmm, not sure.\"}]);}catch(_unused){setMsgs(m=>[...m,{from:\"bot\",text:\"Sorry, server unreachable.\"}]);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"chat-trigger\",title:\"Help\",onClick:()=>setOpen(o=>!o),children:\"\\uD83D\\uDCAC\"}),open&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:\"DermaScan Assistant\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",ref:bodyRef,children:msgs.map((m,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"chat-msg \"+(m.from===\"user\"?\"user\":\"bot\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"bubble\",children:m.text})},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>e.key===\"Enter\"&&send(),placeholder:\"Type a question...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:send,children:\"Send\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Chatbot","open","setOpen","msgs","setMsgs","from","text","input","setInput","bodyRef","current","scrollTop","scrollHeight","send","trim","m","res","fetch","method","headers","body","JSON","stringify","message","data","json","reply","_unused","children","className","title","onClick","o","ref","map","i","value","onChange","e","target","onKeyDown","key","placeholder"],"sources":["C:/Users/kusum/AI_DERMATOLOGIST_capstone/derma_nav_plus_final/frontend/src/components/Chatbot.jsx"],"sourcesContent":["\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nexport default function Chatbot(){\r\n  const [open,setOpen]=useState(false);\r\n  const [msgs,setMsgs]=useState([{from:\"bot\",text:\"Hi! I can help with signup/login, camera/upload, history, and disease info.\"}]);\r\n  const [input,setInput]=useState(\"\");\r\n  const bodyRef=useRef(null);\r\n  useEffect(()=>{ if(bodyRef.current) bodyRef.current.scrollTop = bodyRef.current.scrollHeight; },[msgs,open]);\r\n  const send = async () => {\r\n    const text = input.trim();\r\n    if(!text) return;\r\n    setMsgs(m=>[...m,{from:\"user\",text}]); setInput(\"\");\r\n    try{\r\n      const res = await fetch(\"/api/chat\",{ method:\"POST\", headers:{ \"Content-Type\":\"application/json\" }, body: JSON.stringify({ message: text })});\r\n      const data = await res.json();\r\n      setMsgs(m=>[...m,{from:\"bot\",text:data.reply||\"Hmm, not sure.\"}]);\r\n    }catch{ setMsgs(m=>[...m,{from:\"bot\",text:\"Sorry, server unreachable.\"}]); }\r\n  };\r\n  return (<>\r\n    <button className=\"chat-trigger\" title=\"Help\" onClick={()=>setOpen(o=>!o)}>ðŸ’¬</button>\r\n    {open && (\r\n      <div className=\"chat-panel\">\r\n        <div className=\"chat-header\">DermaScan Assistant</div>\r\n        <div className=\"chat-body\" ref={bodyRef}>\r\n          {msgs.map((m,i)=>(<div key={i} className={\"chat-msg \"+(m.from===\"user\"?\"user\":\"bot\")}><div className=\"bubble\">{m.text}</div></div>))}\r\n        </div>\r\n        <div className=\"chat-input\">\r\n          <input value={input} onChange={e=>setInput(e.target.value)} onKeyDown={e=>e.key===\"Enter\"&&send()} placeholder=\"Type a question...\" />\r\n          <button onClick={send}>Send</button>\r\n        </div>\r\n      </div>\r\n    )}\r\n  </>);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}